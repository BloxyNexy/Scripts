local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/shlexware/Orion/main/source')))()
local MainWindow = OrionLib:MakeWindow({Name = "DizzyCheats", HidePremium = false, SaveConfig = true, ConfigFolder = "DizzyCheats", IntroText = "DizzyCheats"})


--locals
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local localPlayer = Players.LocalPlayer
local highlightEnabled = true 
local highlightColor = Color3.fromRGB(255, 0, 0)
local highlightOutlineColor = Color3.fromRGB(0, 0, 0)
local HLKeybind = nil
local fogHolder = Instance.new("Folder")
fogHolder.Parent = game.Workspace
fogHolder.Name = "DizzyCheats"

--Functions

local function addHighlightToCharacter(character)
    if character and not character:FindFirstChild("Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Parent = character
        highlight.AlwaysOnTop = true
        highlight.FillColor = highlightColor
        highlight.OutlineColor = highlightOutlineColor
    end
end

local function removeHighlightFromCharacter(character)
    if character then
        local highlight = character:FindFirstChild("Highlight")
        if highlight then
            highlight:Destroy()
        end
    end
end

local function updateHL()
    for _, player in pairs(Players:GetPlayers()) do
        if player ~= localPlayer then
            local character = game.Workspace:FindFirstChild(player.Name)
            if character then
                if highlightEnabled then
                    addHighlightToCharacter(character)
                else
                    removeHighlightFromCharacter(character)
                end
            end
        end
    end
end

local function toggleHighlight()
    highlightEnabled = not highlightEnabled
    updateHL()
end

for _, player in pairs(Players:GetPlayers()) do
    if player ~= localPlayer then
        player.CharacterAdded:Connect(function(character)
            if highlightEnabled then
                addHighlightToCharacter(character)
            end
        end)
    end
end

RunService.RenderStepped:Connect(function()
    if highlightEnabled then
        wait()
        updateHL()
    end
end)



--Visuals
local VisualTab = MainWindow:MakeTab({
    Name = "Visual",
    Icon = "",
    PremiumOnly = false
})

local ESPSection = VisualTab:AddSection({
    Name = "ESP"
})

local HighLightToggle = ESPSection:AddToggle({
    Name = "Highlights",
    Default = false,
    Callback = function(Value)
        highlightEnabled = Value
        updateHL()
    end    
})

--misc
local MiscTab = MainWindow:MakeTab({
    Name = "Misc",
    Icon = "",
    PremiumOnly = false
})

local MiscSec = MiscTab:AddSection({
    Name = "Misc"
})

MiscSec:AddButton({
	Name = "Inf Yield (press once and wait 5 seconds)",
	Callback = function()
        OrionLib:MakeNotification({
	Name = "Executing Inf Yield",
	Content = "Wait a few seconds as we are starting up inf yield",
	Image = "",
	Time = 5
})
      loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
  	end    
})

--keybinds
local KeyBinds = MainWindow:MakeTab({
    Name = "Binds",
    Icon = "",
    PremiumOnly = false
}) 

KeyBinds:AddBind({
    Name = "ToggleHighLights",
    Default = Enum.KeyCode.RightShift,
    Hold = false,
    Callback = function()
        highlightEnabled = not highlightEnabled
        updateHL()
    end    
})


--Finished
OrionLib:MakeNotification({
	Name = "Loaded!",
	Content = "Enjoy DizzyCheats V1",
	Time = 5
})
OrionLib:Init()
